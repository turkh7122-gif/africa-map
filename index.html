<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Militant Atlas Deneme</title>
  <style>
    /* ===== GENEL TEMA ===== */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1d1d1d; /* Arka Plan Rengi */
      color: #fff;
      overflow: hidden; /* Harita kaymasını engellemek için */
    }

    #container {
      display: flex;
      height: 100vh;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    /* ===== MAP ALANI ===== */
    #map-area {
      width: 100%;
      height: 100%;
      position: relative;
      cursor: grab;
      user-select: none; /* Harita üzerine sağ tıklamayı engeller */
    }

    svg {
      width: 100%;
      height: 100%;
      transition: transform 0.25s ease;
    }

    svg path {
      fill: #f2f2f2;
      stroke: #555;
      cursor: pointer;
      pointer-events: all;
      transition: fill 0.3s ease;
    }

    svg path:hover {
      fill: #4ade80; /* Hoverda ülke yeşil renk olur */
    }

    /* ===== SIDEBAR ===== */
    #sidebar {
      width: 300px;
      background: #333;
      color: #fff;
      padding: 20px;
      display: none;
      z-index: 10;
    }

    /* ===== TOOLTIP ===== */
    .tooltip {
      position: absolute;
      background: rgba(0, 0, 0, 0.85);
      color: #fff;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 13px;
      pointer-events: none;
      display: none;
      z-index: 10;
    }

  </style>
</head>

<body>

<div id="container">
  <div id="map-area">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1001" id="world-map">
      <!-- SVG path'lerini buraya ekle -->
      <path id="AO" data-name="Angola" d="..." />
      <path id="BI" data-name="Burundi" d="..." />
      <!-- Diğer ülke path'leri burada olacak -->
    </svg>
    <div class="tooltip" id="tooltip"></div>
  </div>

  <div id="sidebar"></div>
</div>

<script>
  // Harita Drag İşlemi
  const mapArea = document.getElementById("map-area");
  let isDragging = false;
  let startX, startY;

  mapArea.addEventListener("mousedown", (e) => {
    isDragging = true;
    startX = e.clientX;
    startY = e.clientY;
    mapArea.style.cursor = "grabbing"; // Fareyi sürüklerken değiştirme
  });

  mapArea.addEventListener("mousemove", (e) => {
    if (isDragging) {
      const moveX = e.clientX - startX;
      const moveY = e.clientY - startY;
      const currentTransform = mapArea.style.transform || "translate(0, 0)";
      const currentTranslate = currentTransform.match(/translate\(([-\d]+)px, ([-\d]+)px\)/);
      
      const translateX = currentTranslate ? parseInt(currentTranslate[1]) + moveX : moveX;
      const translateY = currentTranslate ? parseInt(currentTranslate[2]) + moveY : moveY;

      // Sınırları belirleyelim:
      const minX = -mapArea.offsetWidth + window.innerWidth;
      const maxX = 0;
      const minY = -mapArea.offsetHeight + window.innerHeight;
      const maxY = 0;

      const boundedX = Math.min(Math.max(translateX, minX), maxX);
      const boundedY = Math.min(Math.max(translateY, minY), maxY);

      mapArea.style.transform = `translate(${boundedX}px, ${boundedY}px)`;

      startX = e.clientX;
      startY = e.clientY;
    }
  });

  mapArea.addEventListener("mouseup", () => {
    isDragging = false;
    mapArea.style.cursor = "grab"; // Fareyi bıraktıktan sonra eski haline döner
  });

  mapArea.addEventListener("mouseleave", () => {
    isDragging = false;
    mapArea.style.cursor = "grab"; // Fare haritadan çıkarsa drag durur
  });

  // Tooltip ve Sidebar
  let countryData = {};
  const tooltip = document.getElementById("tooltip");
  const sidebar = document.getElementById("sidebar");
  const svg = document.querySelector("svg");

  fetch("data.json")
    .then(res => res.json())
    .then(data => {
      countryData = data;
      initMap();
    });

  function initMap() {
    document.querySelectorAll("svg path").forEach(path => {
      path.addEventListener("mousemove", e => {
        const id = path.id;
        if (!countryData[id]) return;

        tooltip.style.display = "block";
        tooltip.style.left = e.pageX + 15 + "px";
        tooltip.style.top = e.pageY + 15 + "px";

        tooltip.innerHTML = `
          <strong>${countryData[id].name}</strong>
          ${countryData[id].groups.map(g => g.name).join(", ")}
        `;
      });

      path.addEventListener("mouseleave", () => {
        tooltip.style.display = "none";
      });

      path.addEventListener("click", () => {
        const id = path.id;
        if (!countryData[id]) return;

        sidebar.classList.add("active");
        sidebar.innerHTML = `
          <h2>${countryData[id].name}</h2>
          ${countryData[id].groups.map(g => `
            <div class="group">
              <a href="${g.url}" target="_blank">${g.name}</a>
            </div>
          `).join("")}
        `;
      });
    });
  }
</script>

</body>
</html>
